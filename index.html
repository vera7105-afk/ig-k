<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Igeelemz≈ë j√°t√©k ‚Äî modern diz√°jn (b≈ëv√≠tett mondatok)</title>
<style>
  /* üåà H√°tt√©r √©s alap be√°ll√≠t√°sok */
  body {
    font-family: "Poppins", Arial, sans-serif;
    background: linear-gradient(135deg, #ff0a57 0%, #ff5f97 40%, #9a33d6 100%);
    color: #fff;
    text-align: center;
    padding: 40px 20px;
    min-height: 100vh;
  }

  h1 {
    font-size: 2.2em;
    font-weight: 700;
    margin-bottom: 6px;
  }

  p.small {
    color: rgba(255,255,255,0.9);
    font-size: 0.95em;
    margin-bottom: 20px;
  }

  /* üß© Mondatdoboz (k√°rtya) */
  #sentence {
    background: #fff;
    color: #333;
    display: inline-block;
    padding: 22px;
    border-radius: 16px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.18);
    max-width: 820px;
    margin-bottom: 18px;
  }

  .word-button {
    display: inline-block;
    margin: 6px;
    padding: 10px 14px;
    border-radius: 12px;
    border: none;
    background: #f5f5f7;
    cursor: pointer;
    font-size: 15px;
    transition: transform .18s ease, background .18s ease, color .18s ease;
  }

  .word-button:hover {
    transform: translateY(-3px);
  }

  .word-button.selected {
    background: #ff004f;
    color: #fff;
    transform: scale(1.04);
  }

  .word-button.correct {
    background: #2ecc71;
    color: #fff;
    box-shadow: 0 6px 16px rgba(46,204,113,0.2);
  }

  .word-button.incorrect {
    background: #ffdede;
    color: #a00000;
  }

  /* üéÆ Gombok √©s vez√©rl≈ëk */
  .controls {
    margin-top: 14px;
  }

  button, select {
    padding: 10px 16px;
    border-radius: 10px;
    border: none;
    font-size: 15px;
    cursor: pointer;
    transition: all 0.18s ease;
  }

  #newBtn {
    background: #fff;
    color: #ff004f;
    font-weight: 700;
    border: 2px solid rgba(255,255,255,0.06);
  }

  #newBtn:hover {
    background: #ff004f;
    color: #fff;
  }

  select {
    background: #fff;
    color: #333;
    border: 1px solid #ddd;
    min-width: 200px;
  }

  /* üßæ Elemz√©s l√©p√©sek - v√≠zszintes "f√ºlek" */
  #analysis {
    margin-top: 22px;
  }

  .steps-row {
    display: flex;
    gap: 12px;
    justify-content: center;
    align-items: flex-start;
    flex-wrap: wrap; /* kisebb k√©perny≈ën sorokba t√∂rhet */
    margin-bottom: 12px;
  }

  .step {
    background: #fff;
    color: #333;
    padding: 12px 16px;
    border-radius: 12px;
    box-shadow: 0 6px 18px rgba(0,0,0,0.12);
    min-width: 200px;
    text-align: left;
  }

  .step span.label {
    display:block;
    font-weight:600;
    margin-bottom:8px;
  }

  /* ‚úÖ Visszajelz√©s √©s pontsz√°m */
  #feedback {
    margin-top: 14px;
    font-weight: 700;
    min-height: 36px;
  }

  /* Hib√°s (kor√°bban piros sz√∂veg) most: feh√©r sz√∂veg piros h√°tt√©ren */
  .wrong {
    color: #fff;
    background: #ff3b3b;
    display: inline-block;
    padding: 8px 10px;
    border-radius: 10px;
  }

  /* Teljesen helyes √ºzenet: z√∂ld h√°tt√©r, feh√©r sz√∂veg */
  .correct {
    color: #fff;
    background: #2ecc71;
    display: inline-block;
    padding: 8px 10px;
    border-radius: 10px;
  }

  #score {
    margin-top: 18px;
    font-weight: 800;
    background: rgba(255,255,255,0.12);
    display: inline-block;
    padding: 10px 18px;
    border-radius: 10px;
  }

  /* kisebb k√©perny≈ën a k√°rtya sz√©less√©ge cs√∂kkenjen */
  @media (max-width:640px) {
    #sentence { max-width: 95%; padding: 18px; }
    .step { min-width: 160px; }
    select { min-width: 150px; }
  }
</style>
</head>
<body>

<h1>Igeelemz≈ë j√°t√©k</h1>
<p class="small">Kattints a mondatban az ig√©re (t√∂bb ige is lehet). Ha els≈ëk√©nt nem az ig√©t v√°lasztod, -1 pont j√°r. A k√∂vetkez≈ë feladat csak az "√öj mondat" gombra kattintva jelenik meg ‚Äî √≠gy marad id≈ëd √°tn√©zni a visszajelz√©st.</p>

<div id="sentence"></div>
<div class="controls">
  <button id="newBtn">√öj mondat</button>
</div>

<div id="analysis"></div>

<div id="feedback"></div>
<div id="score">Pontsz√°m: 0/0 (0%)</div>
<div id="summary"></div>

<script>
/*
  Sentences with detailed verb analysis (jelent√©s, m√≥d, id≈ë, t√°rgyass√°g, ragoz√°s ahol relev√°ns)
*/
const sentences = [
  { text:"A kisl√°nyok a j√°tsz√≥t√©ren kacagtak vid√°man eg√©sz d√©lut√°n.",
    verbs: {
      "kacagtak": { jelent√©s:"cselekv√©s", m√≥d:"kijelent≈ë", id≈ë:"m√∫lt", t√°rgyass√°g:"t√°rgyatlan" }
    }
  },
  { text:"Az √©desanya finom palacsint√°t s√ºt√∂tt a nagy csal√°dnak reggelire.",
    verbs: {
      "s√ºt√∂tt": { jelent√©s:"cselekv√©s", m√≥d:"kijelent≈ë", id≈ë:"m√∫lt", t√°rgyass√°g:"t√°rgyas", ragoz√°s:"alanyi" }
    }
  },
  { text:"A post√°s minden reggel pontosan k√©zbes√≠ti a leveleket a h√°zakhoz.",
    verbs: {
      "k√©zbes√≠ti": { jelent√©s:"cselekv√©s", m√≥d:"kijelent≈ë", id≈ë:"jelen", t√°rgyass√°g:"t√°rgyas", ragoz√°s:"t√°rgyas" }
    }
  },
  { text:"A fest≈ëm≈±v√©sz gyors ecsetvon√°sokkal alkotta meg a leny≈±g√∂z≈ë k√©pet.",
    verbs: {
      "alkotta": { jelent√©s:"cselekv√©s", m√≥d:"kijelent≈ë", id≈ë:"m√∫lt", t√°rgyass√°g:"t√°rgyas", ragoz√°s:"t√°rgyas" }
    }
  },
  { text:"A gyerekek hosszan v√°rtak t√ºrelmesen a Mikul√°s √©rkez√©s√©re a teremben.",
    verbs: {
      "v√°rtak": { jelent√©s:"cselekv√©s", m√≥d:"kijelent≈ë", id≈ë:"m√∫lt", t√°rgyass√°g:"t√°rgyas", ragoz√°s:"alanyi" }
    }
  },
  { text:"A r√©g√©sz izgalmas leleteket √°sott ki a f√∂ldb≈ël a helysz√≠nen.",
    verbs: {
      "√°sott": { jelent√©s:"cselekv√©s", m√≥d:"kijelent≈ë", id≈ë:"m√∫lt", t√°rgyass√°g:"t√°rgyas", ragoz√°s:"alanyi" }
    }
  },
  { text:"A di√°kok szorgalmasan tanulj√°k a bonyolult angol nyelvtant is most.",
    verbs: {
      "tanulj√°k": { jelent√©s:"cselekv√©s", m√≥d:"kijelent≈ë", id≈ë:"jelen", t√°rgyass√°g:"t√°rgyas", ragoz√°s:"t√°rgyas" }
    }
  },
  { text:"A takar√≠t√≥n≈ë gondosan felt√∂r√∂lte a padl√≥t a nagyszob√°ban is ma.",
    verbs: {
      "felt√∂r√∂lte": { jelent√©s:"cselekv√©s", m√≥d:"kijelent≈ë", id≈ë:"m√∫lt", t√°rgyass√°g:"t√°rgyas", ragoz√°s:"t√°rgyas" }
    }
  },
  { text:"A nagypapa minden este mes√©t olvas az unok√°j√°nak elalv√°s el≈ëtt.",
    verbs: {
      "olvas": { jelent√©s:"cselekv√©s", m√≥d:"kijelent≈ë", id≈ë:"jelen", t√°rgyass√°g:"t√°rgyas", ragoz√°s:"alanyi" }
    }
  },
  { text:"Az igazgat√≥ kedden d√©lel≈ëtt hossz√∫ besz√©det mondott az alkalmazottaknak.",
    verbs: {
      "mondott": { jelent√©s:"cselekv√©s", m√≥d:"kijelent≈ë", id≈ë:"m√∫lt", t√°rgyass√°g:"t√°rgyas", ragoz√°s:"alanyi" }
    }
  },
  { text:"Senki sincs otthon ma P√°p√°n.",
    verbs: {
      "sincs": { jelent√©s:"l√©tez√©s", m√≥d:"kijelent≈ë", id≈ë:"jelen", t√°rgyass√°g:"t√°rgyatlan" }
    }
  },
  { text:"A nagymam√°m sz√©p, horgolt ter√≠t≈ëket k√©sz√≠tett aj√°nd√©kba a rokonoknak.",
    verbs: {
      "k√©sz√≠tett": { jelent√©s:"cselekv√©s", m√≥d:"kijelent≈ë", id≈ë:"m√∫lt", t√°rgyass√°g:"t√°rgyas", ragoz√°s:"alanyi" }
    }
  },
  { text:"A fut√≥k izzads√°gos kilom√©tereket teljes√≠tenek a maraton √∫tvonal√°n √©ppen.",
    verbs: {
      "teljes√≠tenek": { jelent√©s:"cselekv√©s", m√≥d:"kijelent≈ë", id≈ë:"jelen", t√°rgyass√°g:"t√°rgyas", ragoz√°s:"alanyi" }
    }
  },
  { text:"A kutyus boldogan cs√≥v√°lja a fark√°t, amikor megl√°tja a gazd√°j√°t.",
    verbs: {
      "cs√≥v√°lja": { jelent√©s:"cselekv√©s", m√≥d:"kijelent≈ë", id≈ë:"jelen", t√°rgyass√°g:"t√°rgyas", ragoz√°s:"t√°rgyas" },
      "megl√°tja": { jelent√©s:"cselekv√©s", m√≥d:"kijelent≈ë", id≈ë:"jelen", t√°rgyass√°g:"t√°rgyas", ragoz√°s:"t√°rgyas" }
    }
  },
  { text:"A kert√©sz szorgosan metszi a sz≈ël≈ët≈ëk√©ket a gy√∂ny√∂r≈± sz≈ël≈ëskertben.",
    verbs: {
      "metszi": { jelent√©s:"cselekv√©s", m√≥d:"kijelent≈ë", id≈ë:"jelen", t√°rgyass√°g:"t√°rgyas", ragoz√°s:"t√°rgyas" }
    }
  },
  { text:"A viharos sz√©lben a r√©gi fa√°g let√∂r√∂tt az √∂reg f√°r√≥l v√°ratlanul.",
    verbs: {
      "let√∂r√∂tt": { jelent√©s:"t√∂rt√©n√©s", m√≥d:"kijelent≈ë", id≈ë:"m√∫lt", t√°rgyass√°g:"t√°rgyatlan" }
    }
  },
  { text:"A tegnap esti felh≈ëszakad√°st√≥l a foly√≥ vize nagyon meg√°radt m√°ra.",
    verbs: {
      "meg√°radt": { jelent√©s:"t√∂rt√©n√©s", m√≥d:"kijelent≈ë", id≈ë:"m√∫lt", t√°rgyass√°g:"t√°rgyatlan" }
    }
  },
  { text:"A hirtelen j√∂tt zivatarban az √©g els√∂t√©t√ºlt eg√©szen ijeszt≈ëen.",
    verbs: {
      "els√∂t√©t√ºlt": { jelent√©s:"t√∂rt√©n√©s", m√≥d:"kijelent≈ë", id≈ë:"m√∫lt", t√°rgyass√°g:"t√°rgyatlan" }
    }
  },
  { text:"Az elfelejtett tej a t≈±zhelyen gyorsan kifutott a faz√©kb√≥l v√°ratlanul.",
    verbs: {
      "kifutott": { jelent√©s:"t√∂rt√©n√©s", m√≥d:"kijelent≈ë", id≈ë:"m√∫lt", t√°rgyass√°g:"t√°rgyatlan" }
    }
  },
  { text:"A melegben a frissen kiteregetett ruh√°k megsz√°radtak meglep≈ëen hamar.",
    verbs: {
      "megsz√°radtak": { jelent√©s:"t√∂rt√©n√©s", m√≥d:"kijelent≈ë", id≈ë:"m√∫lt", t√°rgyass√°g:"t√°rgyatlan" }
    }
  },
  { text:"A f√°radts√°gt√≥l a hossz√∫ nap ut√°n a szemem gyorsan lecsuk√≥dott este.",
    verbs: {
      "lecsuk√≥dott": { jelent√©s:"t√∂rt√©n√©s", m√≥d:"kijelent≈ë", id≈ë:"m√∫lt", t√°rgyass√°g:"t√°rgyatlan" }
    }
  },
  { text:"A r√©g√≥ta tart√≥ betegs√©gb≈ël a kisl√°ny v√©gre teljesen fel√©p√ºlt a h√©ten.",
    verbs: {
      "fel√©p√ºlt": { jelent√©s:"t√∂rt√©n√©s", m√≥d:"kijelent≈ë", id≈ë:"m√∫lt", t√°rgyass√°g:"t√°rgyatlan" }
    }
  },
  { text:"Az √∂reg aut√≥m motorja v√°ratlanul le√°llt a zs√∫folt aut√≥p√°ly√°n ma.",
    verbs: {
      "le√°llt": { jelent√©s:"t√∂rt√©n√©s", m√≥d:"kijelent≈ë", id≈ë:"m√∫lt", t√°rgyass√°g:"t√°rgyatlan" }
    }
  },
  { text:"A szomsz√©dasszony kerti vir√°gai gyorsan elny√≠ltak a nagy melegben.",
    verbs: {
      "elny√≠ltak": { jelent√©s:"t√∂rt√©n√©s", m√≥d:"kijelent≈ë", id≈ë:"m√∫lt", t√°rgyass√°g:"t√°rgyatlan" }
    }
  },
  { text:"A s≈±r≈± k√∂d miatt a l√°t√≥t√°vols√°g jelent≈ësen lecs√∂kkent a hegyekben.",
    verbs: {
      "lecs√∂kkent": { jelent√©s:"t√∂rt√©n√©s", m√≥d:"kijelent≈ë", id≈ë:"m√∫lt", t√°rgyass√°g:"t√°rgyatlan" }
    }
  },
  { text:"A reggeli fagyos √©jszaka ut√°n a r√©t vize megfagyott reggelre.",
    verbs: {
      "megfagyott": { jelent√©s:"t√∂rt√©n√©s", m√≥d:"kijelent≈ë", id≈ë:"m√∫lt", t√°rgyass√°g:"t√°rgyatlan" }
    }
  },
  { text:"A cser√©pben l√©v≈ë kis n√∂v√©nyke sz√©pen kiz√∂ld√ºlt a tavaszi napf√©nyben.",
    verbs: {
      "kiz√∂ld√ºlt": { jelent√©s:"t√∂rt√©n√©s", m√≥d:"kijelent≈ë", id≈ë:"m√∫lt", t√°rgyass√°g:"t√°rgyatlan" }
    }
  },
  { text:"A gyertyal√°ng a huzatt√≥l azonnal elaludt a sz√©les ablakp√°rk√°nyon.",
    verbs: {
      "elaludt": { jelent√©s:"t√∂rt√©n√©s", m√≥d:"kijelent≈ë", id≈ë:"m√∫lt", t√°rgyass√°g:"t√°rgyatlan" }
    }
  },
  { text:"A frissen festett fal a szob√°ban majd hamarosan megsz√°rad teljesen.",
    verbs: {
      "megsz√°rad": { jelent√©s:"t√∂rt√©n√©s", m√≥d:"kijelent≈ë", id≈ë:"j√∂v≈ë", t√°rgyass√°g:"t√°rgyatlan" }
    }
  },
  { text:"A tengerparton a h≈ëm√©rs√©klet hirtelen leh≈±lt a d√©lut√°n folyam√°n.",
    verbs: {
      "leh≈±lt": { jelent√©s:"t√∂rt√©n√©s", m√≥d:"kijelent≈ë", id≈ë:"m√∫lt", t√°rgyass√°g:"t√°rgyatlan" }
    }
  },
  { text:"A r√©gi k√∂nyvt√°rban rengeteg izgalmas √©s √©rdekes k√∂tet van elhelyezve.",
    verbs: {
      "van": { jelent√©s:"l√©tez√©s", m√≥d:"kijelent≈ë", id≈ë:"jelen", t√°rgyass√°g:"t√°rgyatlan" }
    }
  },
  { text:"A csal√°di asztalon mindig finom, meleg √©tel lesz vas√°rnap d√©lben.",
    verbs: {
      "lesz": { jelent√©s:"l√©tez√©s", m√≥d:"kijelent≈ë", id≈ë:"j√∂v≈ë", t√°rgyass√°g:"t√°rgyatlan" }
    }
  },
  { text:"Az √°llatkertben sok ritka √©s egzotikus √°llat l√©tezik b√©k√©ben.",
    verbs: {
      "l√©tezik": { jelent√©s:"l√©tez√©s", m√≥d:"kijelent≈ë", id≈ë:"jelen", t√°rgyass√°g:"t√°rgyatlan" }
    }
  },
  { text:"A ny√°ri sz√ºnet lassan, de biztosan elm√∫lik minden √©vben sajnos.",
    verbs: {
      "elm√∫lik": { jelent√©s:"t√∂rt√©n√©s", m√≥d:"kijelent≈ë", id≈ë:"jelen", t√°rgyass√°g:"t√°rgyatlan" }
    }
  },
  { text:"Rem√©lhet≈ëleg a j√∂v≈ë √©vben sokkal szebb id≈ë lesz a tengerparton.",
    verbs: {
      "lesz": { jelent√©s:"l√©tez√©s", m√≥d:"kijelent≈ë", id≈ë:"j√∂v≈ë", t√°rgyass√°g:"t√°rgyatlan" }
    }
  },
  { text:"Az √©jszakai s√∂t√©tben csend √©s b√©kess√©g volt a kis faluban.",
    verbs: {
      "volt": { jelent√©s:"l√©tez√©s", m√≥d:"kijelent≈ë", id≈ë:"m√∫lt", t√°rgyass√°g:"t√°rgyatlan" }
    }
  },
  { text:"Nincsenek eml√©keim r√≥lad m√©g.",
    verbs: {
      "nincsenek": { jelent√©s:"l√©tez√©s", m√≥d:"kijelent≈ë", id≈ë:"jelen", t√°rgyass√°g:"t√°rgyatlan" }
    }
  },
  { text:"A bar√°tommal val√≥ utols√≥ tal√°lkoz√≥nk √≥ta sok id≈ë m√∫lt el m√°ris.",
    verbs: {
      "m√∫lt": { jelent√©s:"t√∂rt√©n√©s", m√≥d:"kijelent≈ë", id≈ë:"m√∫lt", t√°rgyass√°g:"t√°rgyatlan" }
    }
  },
  { text:"J√∂v≈ëre m√°r negyedik oszt√°lyos tanul√≥ lesz a kisebbik testv√©rem.",
    verbs: {
      "lesz": { jelent√©s:"l√©tez√©s", m√≥d:"kijelent≈ë", id≈ë:"j√∂v≈ë", t√°rgyass√°g:"t√°rgyatlan" }
    }
  },
  { text:"Sokan vagyunk fenn a hegyen ma d√©lut√°n.",
    verbs: {
      "vagyunk": { jelent√©s:"l√©tez√©s", m√≥d:"kijelent≈ë", id≈ë:"jelen", t√°rgyass√°g:"t√°rgyatlan" }
    }
  },
  { text:"Fussunk gyorsan a parkon kereszt√ºl, hogy el√©rj√ºk a buszt id≈ëben!",
    verbs: {
      "Fussunk": { jelent√©s:"cselekv√©s", m√≥d:"felsz√≥l√≠t√≥", id≈ë:"jelen", t√°rgyass√°g:"t√°rgyatlan" },
      "el√©rj√ºk": { jelent√©s:"cselekv√©s", m√≥d:"kijelent≈ë", id≈ë:"jelen", t√°rgyass√°g:"t√°rgyas", ragoz√°s: "t√°rgyas" }
    }
  },
  { text:"Ha t√∂bb id≈ënk lenne, elmenn√©nk megn√©zni azt az izgalmas ki√°ll√≠t√°st.",
    verbs: {
      "lenne": { jelent√©s:"l√©tez√©s", m√≥d:"felt√©teles", id≈ë:"jelen", t√°rgyass√°g:"t√°rgyatlan" },
      "elmenn√©nk": { jelent√©s:"cselekv√©s", m√≥d:"felt√©teles", id≈ë:"jelen", t√°rgyass√°g:"t√°rgyatlan" }
    }
  },
  { text:"√çrjatok le minden fontos inform√°ci√≥t a f√ºzetbe, ne felejtsetek el semmit!",
    verbs: {
      "√çrjatok": { jelent√©s:"cselekv√©s", m√≥d:"felsz√≥l√≠t√≥", id≈ë:"jelen", t√°rgyass√°g:"t√°rgyas",ragoz√°s:"alanyi" },
      "ne felejtsetek": { jelent√©s:"cselekv√©s", m√≥d:"felsz√≥l√≠t√≥", id≈ë:"jelen", t√°rgyass√°g:"t√°rgyas", ragoz√°s:"alanyi" }
    }
  },
  { text:"B√°rcsak a nyaral√°sunk √∂r√∂kk√© tartana a naps√ºt√∂tte tengerparton!",
    verbs: {
      "tartana": { jelent√©s:"t√∂rt√©n√©s", m√≥d:"felt√©teles", id≈ë:"jelen", t√°rgyass√°g:"t√°rgyatlan" }
    }
  },
  { text:"Adjatok m√©g egy szeletet abb√≥l az √≠zletes tort√°b√≥l nekem.",
    verbs: {
      "Adjatok": { jelent√©s:"cselekv√©s", m√≥d:"felsz√≥l√≠t√≥", id≈ë:"jelen", t√°rgyass√°g:"t√°rgyas",ragoz√°s:"alanyi" }
    }
  },
  { text:"Ha tudtam volna a probl√©m√°r√≥l, biztosan seg√≠tettem volna azonnal!",
    verbs: {
      "tudtam volna": { jelent√©s:"t√∂rt√©n√©s", m√≥d:"felt√©teles", id≈ë:"m√∫lt", t√°rgyass√°g:"t√°rgyas", ragoz√°s:"t√°rgyas" },
      "seg√≠tettem volna": { jelent√©s:"cselekv√©s", m√≥d:"felt√©teles", id≈ë:"m√∫lt", t√°rgyass√°g:"t√°rgyatlan" }
    }
  },
  { text:"Legyen neked is csod√°latos √©s nagyon sikeres a k√∂vetkez≈ë heted!",
    verbs: {
      "Legyen": { jelent√©s:"l√©tez√©s", m√≥d:"felsz√≥l√≠t√≥", id≈ë:"jelen", t√°rgyass√°g:"t√°rgyatlan" }
    }
  },
  { text:"A vizsgaid≈ëszak sokkal k√∂nnyebb volna, ha jobban beosztottam volna az id≈ëmet.",
    verbs: {
    
      "beosztottam volna": { jelent√©s:"cselekv√©s", m√≥d:"felt√©teles", id≈ë:"m√∫lt", t√°rgyass√°g:"t√°rgyas", ragoz√°s:"t√°rgyas" }
    }
  },
  { text:"Hallgass√°tok meg a tan√°r magyar√°zat√°t figyelmesen, miel≈ëtt elkezden√©tek a munk√°t.",
    verbs: {
      "Hallgass√°tok": { jelent√©s:"cselekv√©s", m√≥d:"felsz√≥l√≠t√≥", id≈ë:"jelen", t√°rgyass√°g:"t√°rgyas",ragoz√°s:"t√°rgyas" },
      "elkezden√©tek": { jelent√©s:"cselekv√©s", m√≥d:"felt√©teles", id≈ë:"jelen", t√°rgyass√°g:"t√°rgyas", ragoz√°s:"alanyi" }
    }
  },
  { text:"Sz√≠vesen utazn√©k most melegebb √©ghajlatra egy hossz√∫ h√©tv√©g√©re is.",
    verbs: {
      "utazn√©k": { jelent√©s:"cselekv√©s", m√≥d:"felt√©teles", id≈ë:"jelen", t√°rgyass√°g:"t√°rgyatlan" }
    }
  }
];

let score = 0;
let attempts = 0;
let current = null;
let currentVerb = "";

const sentenceEl = document.getElementById("sentence");
const analysisEl = document.getElementById("analysis");
const feedbackEl = document.getElementById("feedback");
const scoreEl = document.getElementById("score");
const summaryEl = document.getElementById("summary");
const newBtn = document.getElementById("newBtn");

function newSentence() {
  // tiszt√≠t√°s (de ne √°ll√≠tsuk vissza a pontokat)
  analysisEl.innerHTML = "";
  feedbackEl.innerHTML = "";
  summaryEl.innerHTML = "";

  current = JSON.parse(JSON.stringify(sentences[Math.floor(Math.random()*sentences.length)]));
  currentVerb = "";

  sentenceEl.innerHTML = "";
  const words = current.text.split(" ");
  words.forEach(w => {
    const clean = w.replace(/[.,!?]/g,"");
    const btn = document.createElement("button");
    btn.className = "word-button";
    btn.textContent = clean;
    btn.onclick = () => onWordClick(clean, btn);
    sentenceEl.appendChild(btn);
  });

  newBtn.disabled = false;
}

function onWordClick(word, btn) {
  document.querySelectorAll(".word-button").forEach(b => b.classList.remove("selected"));
  btn.classList.add("selected");

  if (!current.verbs.hasOwnProperty(word)) {
    attempts++;
    score = Math.max(0, score - 1);
    updateScoreDisplay();
    const correctVerbs = Object.keys(current.verbs);
    feedbackEl.innerHTML = `<div class="wrong">Ez nem ige. Helyes ige(ke): <strong>${correctVerbs.join(", ")}</strong></div>`;
    document.querySelectorAll(".word-button").forEach(b=>{
      const txt = b.textContent.trim();
      if (correctVerbs.includes(txt)) b.classList.add("correct");
    });
    return;
  }

  currentVerb = word;
  feedbackEl.innerHTML = "";
  renderAnalysis();
}

function updateScoreDisplay() {
  const percent = attempts === 0 ? 0 : Math.round((score / attempts) * 100);
  scoreEl.textContent = `Pontsz√°m: ${score}/${attempts} (${percent}%)`;
}

/* --- ANALYSIS RENDER --- */
function renderAnalysis() {
  analysisEl.innerHTML = "";
  const title = document.createElement("h3");
  title.textContent = `Elemz√©s: ${currentVerb}`;
  analysisEl.appendChild(title);

  const row = document.createElement("div");
  row.className = "steps-row";

  const step1 = createStep("Ige jelent√©se:", ["", "cselekv√©s", "t√∂rt√©n√©s", "l√©tez√©s"]);
  const step2 = createStep("Ige m√≥dja:", ["", "kijelent≈ë", "felt√©teles", "felsz√≥l√≠t√≥"]);
  const step3 = createStep("Ige ideje:", ["", "jelen", "m√∫lt", "j√∂v≈ë"]);
  const step4 = createStep("T√°rgyas vagy t√°rgyatlan:", ["", "t√°rgyas", "t√°rgyatlan"]);
  const step5 = createStep("Ragoz√°s t√≠pusa:", ["", "alanyi", "t√°rgyas"]);

  const checkBtn = document.createElement("button");
  checkBtn.textContent = "Ellen≈ërz√©s";
  checkBtn.style.display = "none";
  checkBtn.style.marginTop = "8px";

  step5.div.appendChild(document.createElement("br"));
  step5.div.appendChild(checkBtn);

  row.append(step1.div, step2.div, step3.div, step4.div, step5.div);
  analysisEl.appendChild(row);

  step1.select.addEventListener("change", () => {
    if (step1.select.value) step2.div.style.display = "block";
  });

  step2.select.addEventListener("change", () => {
    if (step2.select.value) step3.div.style.display = "block";
  });

  step3.select.addEventListener("change", () => {
    if (step3.select.value) step4.div.style.display = "block";
  });

  step4.select.addEventListener("change", () => {
    if (step4.select.value === "t√°rgyatlan") {
      evaluateUser({
        jelent√©s: step1.select.value,
        m√≥d: step2.select.value,
        id≈ë: step3.select.value,
        t√°rgyass√°g: step4.select.value
      });
    } else if (step4.select.value === "t√°rgyas") {
      step5.div.style.display = "block";
      checkBtn.style.display = "inline-block";
    } else {
      step5.div.style.display = "none";
      checkBtn.style.display = "none";
    }
  });

  checkBtn.addEventListener("click", () => {
    evaluateUser({
      jelent√©s: step1.select.value,
      m√≥d: step2.select.value,
      id≈ë: step3.select.value,
      t√°rgyass√°g: step4.select.value,
      ragoz√°s: step5.select.value
    });
  });
}

function createStep(labelText, options, hidden=false) {
  const div = document.createElement("div");
  div.className = "step";
  if (hidden) div.style.display = "none";
  const lbl = document.createElement("span");
  lbl.className = "label";
  lbl.textContent = labelText;
  const select = document.createElement("select");
  options.forEach(v => {
    const opt = document.createElement("option");
    opt.value = v;
    opt.textContent = v === "" ? "-- v√°lassz --" : v;
    select.appendChild(opt);
  });
  div.appendChild(lbl);
  div.appendChild(select);
  return { div, select };
}

function evaluateUser(userAnswers) {
  const correctObj = current.verbs[currentVerb];
  const keysToCheck = Object.keys(correctObj);

  attempts++;
  let allCorrect = true;
  const wrongs = [];

  keysToCheck.forEach(k=>{
    const userVal = userAnswers[k];
    const correctVal = correctObj[k];
    if (!userVal || userVal !== correctVal) {
      allCorrect = false;
      wrongs.push({key:k, correct:correctVal, given: userVal || "(nem v√°laszolt)"});
    }
  });

  if (allCorrect) {
    score += 1;
    feedbackEl.innerHTML = `<div class="correct">Teljesen helyes! +1 pont</div>`;
  } else {
    let html = `<div class="wrong">Nem teljesen helyes.</div><div style="height:8px"></div>`;
    wrongs.forEach(w=>{
      html += `<div style="display:inline-block;margin:6px;padding:8px 10px;border-radius:8px;background:#ff3b3b;color:#fff;">${niceNameForKey(w.key)}: <strong>${w.correct}</strong> (te: ${w.given})</div>`;
    });
    feedbackEl.innerHTML = html;
  }

  if (score < 0) score = 0;
  updateScoreDisplay();
  // Nincs automatikus tov√°bbl√©p√©s ‚Äî marad id≈ë az √°tn√©z√©sre
}

function niceNameForKey(k) {
  if (k==="jelent√©s") return "Ige jelent√©se";
  if (k==="m√≥d") return "Ige m√≥dja";
  if (k==="id≈ë") return "Ige ideje";
  if (k==="t√°rgyass√°g") return "T√°rgyass√°g";
  if (k==="ragoz√°s") return "Ragoz√°s t√≠pusa";
  return k;
}

newBtn.addEventListener("click", () => {
  document.querySelectorAll(".word-button").forEach(b=>{
    b.classList.remove("correct","incorrect","selected");
  });
  newSentence();
});

newSentence();
updateScoreDisplay();
</script>

</body>
</html>
